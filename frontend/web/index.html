<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ======================================================
         VNC PLATFORM â€” WEB ENTRY
         File: frontend/web/index.html
         FINAL MASTER HARD-LOCK v6.7.0.4
         ====================================================== -->

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Viewport -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <!-- App Identity -->
    <title>VNC Platform</title>
    <meta name="application-name" content="VNC Platform" />
    <meta name="description" content="VNC Platform Secure Client" />

    <!-- Theme -->
    <meta name="theme-color" content="#0B0F1A" />

    <!-- PWA -->
    <link rel="manifest" href="manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- Icons -->
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="apple-touch-icon" href="favicon.png" />

    <!-- Security Headers (best-effort for static hosting) -->
    <meta http-equiv="Content-Security-Policy"
      content="
        default-src 'self';
        script-src 'self' 'unsafe-eval';
        style-src 'self' 'unsafe-inline';
        img-src 'self' data:;
        font-src 'self' data:;
        connect-src 'self' https:;
      " />

    <!-- Flutter bootstrap -->
    <base href="/" />
  </head>

  <body>
    <noscript>
      <div style="padding:16px;font-family:sans-serif;">
        JavaScript is required to run this application.
      </div>
    </noscript>

    <!-- Flutter app mounts here -->
    <div id="flutter_app"></div>

    <!-- Flutter loader -->
    <script src="flutter.js" defer></script>
    <script defer>
      window.addEventListener('load', function () {
        if (!window._flutter) {
          console.error('Flutter engine failed to load.');
          return;
        }

        window._flutter.loader
          .loadEntrypoint({
            serviceWorker: {
              serviceWorkerVersion: null
            }
          })
          .then(function (engineInitializer) {
            return engineInitializer.initializeEngine({
              hostElement: document.getElementById('flutter_app')
            });
          })
          .then(function (appRunner) {
            return appRunner.runApp();
          })
          .catch(function (error) {
            console.error('Flutter app failed to start:', error);
          });
      });
    </script>
  </body>
</html>
